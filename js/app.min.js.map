{"version":3,"file":"app.min.js","sources":["../../app/app.js","../../app/components/detail/pixelsDirective.js","../../app/components/detail/targetingDirective.js","../../app/components/detail/videoDetailDirective.js","../../app/components/detail/zencoderService.js","../../app/components/detail/videoAdDetailController.js","../../app/components/detail/videoFieldDirective.js","../../app/shared/videoplayermodal/videoPlayerModalDirective.js","../../app/components/exclusion/exclusionController.js","../../app/components/videoAdList/videoAdListController.js","../../app/components/videoAdList/dirPagination.js","../../app/components/login/loginController.js","../../app/shared/alert/alertDirective.js","../../app/shared/auth/tokenAuthService.js","../../app/shared/chart/chartDirective.js","../../app/shared/converttolocal/convertToLocalFilter.js","../../app/shared/datepicker/datepickerDirective.js","../../app/shared/delivery/deliveryDirective.js","../../app/shared/navbar/navbarDirective.js","../../app/shared/videoads/videoAdService.js","../../app/shared/placeholderimage/placeholderImageFilter.js"],"names":["angular","module","config","$locationProvider","$httpProvider","$routeProvider","$sceDelegateProvider","resourceUrlWhitelist","html5Mode","when","templateUrl","controller","reloadOnSearch","otherwise","redirectTo","directive","scope","videoad","pixels","link","$scope","$","on","e","keyCode","target","parent","find","click","addPixel","bt","event","parents","data","pixel","siblings","val","length","push","removePixel","index","splice","targets","priorities","addTargetingGroup","priority","rules","removeTargetingGroup","confirm","modal","off","$apply","addTargetingRow","removeTargetingRow","parentIndex","video","adid","service","$http","$q","$interval","uploadToS3","file","videoObject","s3Config","encoding_payload","s3deferred","defer","formData","FormData","append","key","AWSAccessKeyId","acl","success_action_status","policy","signature","xhr","XMLHttpRequest","open","upload_endpoint","upload","onprogress","notify","lengthComputable","Math","round","loaded","total","onload","resolve","addEventListener","reject","send","promise","encode","encodeDeferred","method","url","id","success","response","zencoderProgressEndpoint","json","progressInterval","ignoreAuthorizationHeader","then","state","cancel","_","isUndefined","progress","error","this","uploadToS3AndEncode","uploadToS3AndEncodeDeferred","successCallback","errorCallback","notifyCallback","$routeParams","videoAdService","$location","$rootScope","AlertEvents","$timeout","showSaveButton","showSearchBar","errors","page_targets","user_targets","defaultPixelsObject","impression","clickThrough","complete","firstQuartile","midpoint","start","thirdQuartile","getAndInitVideoAd","videoAdId","initVideoAd","one","get","console","log","targeting","page","user","videos","addTargetingKey","targetingKey","saveVideoAd","videoAdDetailForm","$valid","post","$broadcast","SUCCESS","path","ERROR","CLEAR","save","$on","addVideo","adId","Zencoder","transclude","removeVideo","uploadVideo","fileField","unbind","bind","files","validateVideoFile","addVideoToAdvertisement","message","INFO","fetchNewVideoObject","isEmpty","sources","poster","validateVideoFileDeferred","size","type","indexOf","addVideoToAdvertisementDeferred","advertisement","name","uploadToS3Arguments","replace","restrict","element","currentVideo","player","videojs","controls","autoplay","width","height","pause","dispose","exclusion","videoAds","params","search","page_size","filter","currentPage","totalItems","loading","updateList","undefined","getList","meta","count","newVideoAd","changeOrder","orderBy","reverse","changeFilter","pageChanged","newPage","searchTerm","preventDefault","omit","moduleName","templatePath","err","$compile","$parse","paginationService","terminal","multiElement","compile","tElement","tAttrs","hasAttribute","$set","dirPaginate","eq","attr","expression","match","filterPattern","itemsPerPageFilterRemoved","collectionGetter","paginationId","registerInstance","attrs","currentPageGetter","compiled","defaultCurrentPage","setCurrentPageParser","setAsyncModeTrue","$watch","result","setCollectionLength","$watchCollection","collection","generatePagesArray","collectionLength","rowsPerPage","paginationRange","position","pages","totalPages","ceil","halfWay","ellipsesNeeded","i","pageNumber","calculatePageNumber","openingEllipsesNeeded","closingEllipsesNeeded","numberRegex","elem","maxSize","onPageChange","goToPage","num","isValidPageNumber","getCollectionLength","getItemsPerPage","pagination","current","newPageNumber","generatePagination","parseInt","getCurrentPage","last","setCurrent","test","directionLinks","isDefined","$parent","$eval","boundaryLinks","isRegistered","idMessage","max","previousPage","setCurrentPage","itemsPerPage","end","Array","isAsyncMode","setItemsPerPage","slice","lastRegisteredInstance","instances","instanceId","asyncMode","getLastInstanceId","currentPageParser","context","assign","parser","authService","username","password","submitLogin","login","constant","alertStatus","info","infoMessage","errorMessage","successMessage","factory","$window","$injector","httpRequestBuffer","request","headers","sessionStorage","token","Authorization","responseError","ignoreAuthModule","status","deferred","refreshToken","interceptors","_login","_refreshToken","retryAll","rejectAll","_retryHttpRequest","buffer","reason","each","impressions","semiCircleConfig","options","chart","backgroundColor","margin","exporting","enabled","credits","tooltip","colors","series","dataLabels","states","hover","animation","startAngle","endAngle","center","innerSize","title","text","subtitle","input","moment","utc","local","format","$filter","date","require","template","ngModel","required","startDate","Date","time","setMinutes","setHours","setSeconds","datetimepicker","step","formatter","value","$formatters","unshift","$parsers","momentFormat","logoUrl","clearSearch","Restangular","setBaseUrl","setRequestSuffix","RestangularProvider","addResponseInterceptor","operation","results","prev","next","placeholderUrl"],"mappings":"AAAA,YAIAA,SAAQC,OAAO,aACb,YACA,UACA,YACA,aACA,cACA,kBAECC,OAAO,SAASC,kBAAmBC,cAAeC,eAAgBC,sBACjEA,qBAAqBC,sBAAsB,OAAQ,2CAA4C,mDAAoD,wDAAyD,6BAE5MJ,kBAAkBK,WAAU,GAE5BH,eACGI,KAAK,KACJC,YAAa,0CACbC,WAAY,wBACZC,gBAAgB,IAEjBH,KAAK,UACJC,YAAa,8BACbC,WAAY,cAEbF,KAAK,qBACJC,YAAa,uCACbC,WAAY,4BAEbF,KAAK,SACJC,YAAa,uCACbC,WAAY,4BAEbF,KAAK,8BACJC,YAAa,sCACbC,WAAY,kBAEbE,WACCC,WAAY,QCtCpBd,QAAQC,OAAO,aACbc,UAAU,SAAU,WACpB,OACCL,YAAa,gCACbM,OACCC,QAAW,IACXC,OAAU,KAEXC,KAAM,SAASC,QACdC,EAAE,mBAAmBC,GAAG,WAAY,QAAS,SAASC,GACrD,MAAiB,MAAdA,EAAEC,SACJH,EAAEE,EAAEE,QAAQC,SAASC,KAAK,UAAUC,SAC7B,GAFR,SAKDR,OAAOS,SAAW,SAASN,GAC1B,GAAIO,IAAKT,EAAEE,EAAEE,QACTM,MAAQV,EAAES,IAAIE,QAAQ,gBAAgBC,KAAK,SAC3CC,MAAQb,EAAES,IAAIJ,SAASS,SAAS,SAASC,KAC1CF,OAAMG,OAAS,IACjBjB,OAAOH,QAAQC,OAAOa,OAAOO,KAAKJ,OAClCb,EAAES,IAAIJ,SAASS,SAAS,SAASC,IAAI,MAIvChB,OAAOmB,YAAc,SAASR,MAAOS,OACpCpB,OAAOH,QAAQC,OAAOa,OAAOU,OAAOD,MAAO,QC1BhDxC,QAAQC,OAAO,aACZc,UAAU,YAAa,WACtB,OACEL,YAAa,mCACbM,OACES,OAAU,IACViB,QAAW,KAEbvB,KAAM,SAAUC,QACdA,OAAOuB,YACL,MACA,SACA,QAGFvB,OAAOwB,kBAAoB,WACzBxB,OAAOK,OAAOa,MAAMO,SAAY,SAAUC,QAAW,GAAI,KAAM,QAEjE1B,OAAO2B,qBAAuB,SAAUP,MAAOQ,SACzCA,SACF5B,OAAOK,OAAOgB,OAAOD,MAAO,GAC5BnB,EAAE,+BAA+B4B,MAAM,UAEvC5B,EAAE,sCAAsC6B,IAAI,SAC5C7B,EAAE,sCAAsCO,MAAM,WAC5CR,OAAO2B,qBAAqBP,OAAO,GACnCpB,OAAO+B,WAET9B,EAAE,+BAA+B4B,MAAM,UAG3C7B,OAAOgC,gBAAkB,SAAUZ,OACjCpB,OAAOK,OAAOe,OAAc,MAAEF,MAAM,GAAI,KAAM,MAEhDlB,OAAOiC,mBAAqB,SAAUC,YAAad,OACjDpB,OAAOK,OAAO6B,aAAoB,MAAEb,OAAOD,MAAO,GACA,GAA9CpB,OAAOK,OAAO6B,aAAoB,MAAEjB,QACtCjB,OAAOK,OAAOgB,OAAOa,YAAa,QCrC9CtD,QAAQC,OAAO,aACZc,UAAU,gBAAiB,WAC1B,OACEL,YAAa,qCACbM,OACEuC,MAAS,IACTC,KAAQ,IACRhB,MAAS,QCPjBxC,QAAQC,OAAO,aACZwD,QAAQ,WAAY,SAAkBC,MAAOC,GAAIC,WAuBhD,QAASC,YAAWC,KAAMC,aACxB,GAAIC,UAAWD,YAAYE,iBACvBC,WAAaP,GAAGQ,QAEhBC,SAAW,GAAIC,SACnBD,UAASE,OAAO,MAAON,SAASO,KAChCH,SAASE,OAAO,iBAAkBN,SAASQ,gBAC3CJ,SAASE,OAAO,MAAON,SAASS,KAChCL,SAASE,OAAO,wBAAyBN,SAASU,uBAClDN,SAASE,OAAO,SAAUN,SAASW,QACnCP,SAASE,OAAO,YAAaN,SAASY,WACtCR,SAASE,OAAO,OAAQR,KAExB,IAAIe,KAAM,GAAIC,eAqBd,OApBAD,KAAIE,KAAK,OAAQf,SAASgB,iBAE1BH,IAAII,OAAOC,WAAa,SAAS3D,GAE7B2C,WAAWiB,OADT5D,EAAE6D,iBACc,UAAYC,KAAKC,MAAM/D,EAAEgE,OAAShE,EAAEiE,MAAQ,KAAO,aAEnD,iBAItBX,IAAIY,OAAS,WACXvB,WAAWiB,OAAO,oCAClBjB,WAAWwB,QAAQ3B,cAGrBc,IAAIc,iBAAiB,QAAS,WAC5BzB,WAAW0B,OAAO,oBAGpBf,IAAIgB,KAAKzB,UACFF,WAAW4B,QAIpB,QAASC,QAAOhC,aACd,GAAIiC,gBAAiBrC,GAAGQ,OA6BxB,OA3BAT,QACEuC,OAAQ,OACRC,IAAK,cAAgBnC,YAAYoC,GAAK,aACrCC,QAAQ,SAASC,UAClB,GAAIC,0BAA2BD,SAASE,KACpCC,iBAAmB5C,UAAU,WAC/BF,OACEwC,IAAKI,yBACLL,OAAQ,MACRQ,2BAA6B,IAC5BC,KAAK,SAASL,UACa,aAAxBA,SAASpE,KAAK0E,OAChBX,eAAeN,QAAQ3B,aACvBH,UAAUgD,OAAOJ,mBACgB,WAAxBH,SAASpE,KAAK0E,OACvBX,eAAeJ,OAAO,wBACtBhC,UAAUgD,OAAOJ,mBAEZK,EAAEC,YAAYT,SAASpE,KAAK8E,WAC/Bf,eAAeb,OAAO,aAAeE,KAAKC,MAAMe,SAASpE,KAAK8E,UAAY,QAI/E,OACFC,MAAM,SAAS/E,MAChB+D,eAAeJ,OAAO3D,QAEjB+D,eAAeF,QAzFxBmB,KAAKC,oBAAsB,SAAShH,QAClC,GAAIiH,6BAA8BxD,GAAGQ,QACjCL,KAAO5D,OAAO4D,KACdC,YAAc7D,OAAO6D,YACrBqD,gBAAkB,SAAShB,SAC7Be,4BAA4BzB,QAAQU,UAElCiB,cAAgB,SAASL,OAC3BG,4BAA4BvB,OAAOoB,QAEjCM,eAAiB,SAASnC,QAC5BgC,4BAA4BhC,OAAOA,QAOrC,OAJAtB,YAAWC,KAAMC,aACd2C,KAAKX,OAAQsB,cAAeC,gBAC5BZ,KAAKU,gBAAiBC,cAAeC,gBAEjCH,4BAA4BrB,WCrBzC9F,QAAQC,OAAO,aACZU,WAAW,2BAA4B,SAAU,eAAgB,iBAAkB,YAAa,aAAc,cAAe,WAAY,SAASS,OAAQmG,aAAcC,eAAgBC,UAAWC,WAAYC,YAAaC,UAC3NF,WAAWG,gBAAiB,EAC5BH,WAAWI,eAAgB,EAC3B1G,OAAOgF,SAAU,EACjBhF,OAAO2G,QAAS,EAChB3G,OAAOH,WACPG,OAAO4G,cACL,gBACA,eACA,eACA,cACA,kBACA,WACA,gBACA,gBACA,eAEF5G,OAAO6G,cACL,OACA,SACA,eAGF,IAAIC,sBACFC,cACAC,gBACAC,YACAC,iBACAC,YACAC,SACAC,iBAGFrH,QAAOsH,kBAAoB,WACrB7B,EAAEC,YAAYS,aAAaoB,YAC7BvH,OAAOH,WACPG,OAAOH,QAAQkF,GAAK,KACpB/E,OAAOwH,eAEPpB,eAAeqB,IAAItB,aAAaoB,WAAWG,MAAMpC,KAC/C,SAASzE,MACPb,OAAOH,QAAUgB,KACjBb,OAAOwH,eAET,SAAS3G,MACP8G,QAAQC,IAAI/G,SAOpBb,OAAOwH,YAAc,WACdxH,OAAOH,QAAQgI,YAClB7H,OAAOH,QAAQgI,cAEZ7H,OAAOH,QAAQgI,UAAUC,OAC5B9H,OAAOH,QAAQgI,UAAUC,SAEtB9H,OAAOH,QAAQgI,UAAUE,OAC5B/H,OAAOH,QAAQgI,UAAUE,SAE3B/H,OAAOH,QAAQmI,OAAShI,OAAOH,QAAQmI,WACvChI,OAAOH,QAAQC,OAASE,OAAOH,QAAQC,QAAUgH,qBAGnD9G,OAAOiI,gBAAkB,SAAS9E,KAChCnD,OAAOkI,aAAe/E,KAGxBnD,OAAOmI,YAAc,WACfnI,OAAOoI,kBAAkBC,OACtB5C,EAAEC,YAAYS,aAAaoB,WAa9BnB,eAAekC,KAAKtI,OAAOH,SACxByF,KACC,SAASzE,MACPyF,WAAWiC,WAAWhC,YAAYiC,QAAS,SAC3ChC,SAAS,WACPH,UAAUoC,KAAK,SAAW5H,KAAKkE,GAAK,KACpC/E,OAAO+B,UACN,MAEL,WACEuE,WAAWiC,WAAWhC,YAAYmC,MAAO,mFACzClC,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,OAzBT3I,OAAOH,QAAQ+I,OAAOtD,KAAK,WACzBgB,WAAWiC,WAAWhC,YAAYiC,QAAS,SAC3ChC,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,MACF,WACDrC,WAAWiC,WAAWhC,YAAYmC,MAAO,mFACzClC,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,QAoBPrC,WAAWiC,WAAWhC,YAAYmC,MAAO,uCACzClC,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,OAIP3I,OAAO6I,IAAI,gBAAiB,WAC1B7I,OAAOmI,gBAGTnI,OAAO8I,SAAW,WAChB9I,OAAOH,QAAQmI,OAAO9G,MACpB6H,KAAM/I,OAAOH,QAAQkF,MAGzB/E,OAAOsH,uBCvHX1I,QAAQC,OAAO,aACZc,UAAU,aAAc,SAASqJ,SAAUzG,GAAID,MAAOkE,UACrD,OACElH,YAAa,oCACb2J,YAAY,EACZ1J,WAAY,SAASS,OAAQsG,WAAYC,aACvCvG,OAAOkJ,YAAc,WACnBlJ,OAAOmC,MAAQ,MAGjBnC,OAAOmJ,YAAc,WACnB,GAAIC,WAAYnJ,EAAE,IAAMD,OAAOoB,MAAQ,cACvCgI,WAAUC,OAAO,UACjBD,UAAUE,KAAK,SAAU,SAAS3I,OAChC,GAAI+B,MAAO/B,MAAMN,OAAOkJ,MAAM,EAC9BvJ,QAAOwJ,kBAAkB9G,MACtB4C,KAAKtF,OAAOyJ,yBACZnE,KAAK0D,SAASlD,qBACdR,KACC,WACEgB,WAAWiC,WAAWhC,YAAYiC,QAAS,oBAG7C,SAAS5C,OACPU,WAAWiC,WAAWhC,YAAYmC,MAAO9C,OACzCY,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,MAEL,SAASe,SACFjE,EAAEC,YAAYgE,UACjBpD,WAAWiC,WAAWhC,YAAYoD,KAAMD,WAG7CpE,KAAKsE,uBAEVR,UAAU5I,QAGZ,IAAIoJ,qBAAsB,WAExBtH,MAAMoF,IAAI,eAAiB1H,OAAOmC,MAAM4C,GAAK,KAC1CO,KAAK,SAASL,UACTQ,EAAEoE,QAAQ5E,SAASpE,KAAKiJ,SAC1BtD,SAASoD,oBAAqB,MAG9B5J,OAAOmC,MAAM2H,QAAU7E,SAASpE,KAAKiJ,QACrC9J,OAAOmC,MAAM4H,OAAS9E,SAASpE,KAAKkJ,OACpC/J,OAAOmC,MAAQ8C,SAASpE,KACxB2F,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,QAKX3I,QAAOwJ,kBAAoB,SAAS9G,MAClC,GAAIsH,2BAA4BzH,GAAGQ,OAWnC,OAVIL,QACEA,KAAKuH,KAAO,WACdD,0BAA0BxF,OAAO,6CACQ,IAAhC9B,KAAKwH,KAAKC,QAAQ,UAC3BH,0BAA0BxF,OAAO,iCAEjCwF,0BAA0B1F,QAAQ5B,MAEpCsH,0BAA0BxF,OAAO,0BAE5BwF,0BAA0BtF,SAGnC1E,OAAOyJ,wBAA0B,SAAS/G,MACxC,GAAI0H,iCAAkC7H,GAAGQ,OAYzC,OAXAT,OAAMgG,KAAK,gBACT+B,cAAiBrK,OAAOoC,KACxBkI,KAAQ5H,KAAK4H,OACZhF,KAAK,SAASL,UACfjF,OAAOmC,MAAQ8C,SAASpE,IACxB,IAAI0J,sBACF7H,KAAQA,KACRC,YAAe3C,OAAOmC,MAExBiI,iCAAgC9F,QAAQiG,uBAEnCH,gCAAgC1F,aCrFjD9F,QAAQC,OAAO,aACZc,UAAU,oBAAsB,WAC/B,OACE6K,SAAS,EACTC,SAAU,IACVxB,YAAY,EACZ3J,YAAa,gDACbS,KAAM,SAASH,MAAO8K,SACpB,GAAIC,cAAeD,QAAQnK,KAAK,SAAS,EACzCX,OAAMgL,OAASC,QAAQF,cACrBG,UAAY,EACZC,UAAY,EACZC,MAAS,OACTC,OAAU,SAGZP,QAAQnK,KAAK,UAAUL,GAAG,kBAAmB,WAC3CN,MAAMgL,OAAOM,UAGftL,MAAMiJ,IAAI,WAAY,WACpBjJ,MAAMgL,OAAOO,iBCrBvBvM,QAAQC,OAAO,aACVU,WAAW,gBAAiB,SAAUS,OAAQsC,MAAOgE,WAAYC,YAAaC,UAC3ExG,OAAOoL,aACPpL,OAAOoL,UAAUvD,aACjB7H,OAAOoL,UAAUvD,UAAUC,QAC3B9H,OAAOoL,UAAUvD,UAAUE,QAG3B/H,OAAO4G,cACH,gBACA,eACA,eACA,cACA,kBACA,WACA,gBACA,iBAEJ5G,OAAO6G,cACH,OACA,SACA,gBAGJvE,OACIuC,OAAQ,MACRC,IAAK,4BACNQ,KAAK,SAASL,UACbjF,OAAOoL,UAAYnG,SAASpE,MAC7B,SAAU+E,OACX+B,QAAQC,IAAIhC,SAGd5F,OAAO4I,KAAO,WACV,GAAI/H,MAAOb,OAAOoL,SAClB9I,QACIuC,OAAQ,MACRC,IAAK,wBAA0B9E,OAAOoL,UAAUrG,GAAK,IACrDlE,KAAMA,OACPmE,QAAQ,WACPsB,WAAWiC,WAAWhC,YAAYiC,QAAS,0BAC3ChC,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,OACJ/C,MAAM,WACLU,WAAWiC,WAAWhC,YAAYmC,MAAO,yFACzClC,SAAS,WACPF,WAAWiC,WAAWhC,YAAYoC,QACjC,UCjDnB/J,QAAQC,OAAO,aACZU,WAAW,yBAA0B,SAAU,YAAa,iBAAkB,eAAgB,aAAc,SAASS,OAAQqG,UAAWD,eAAgBD,aAAcG,YACrKtG,OAAOqL,YACP/E,WAAWI,eAAgB,EAC3BJ,WAAWG,gBAAiB,EAE1BzG,OAAOsL,OADL7F,EAAEoE,QAAQxD,UAAUkF,WAEpBC,UAAa,EACbC,OAAU,UAGIpF,UAAUkF,SAE5BvL,OAAO0L,YAAc,EACrB1L,OAAO2L,WAAa,EACpB3L,OAAO4L,SAAU,EACjB5L,OAAO2G,QAAS,EAEhB3G,OAAO6L,WAAa,WACWC,SAAzB9L,OAAOsL,OAAOG,SAChBzL,OAAOsL,OAAOG,OAAS,UAEzBpF,UAAUkF,OAAOvL,OAAOsL,QACxBlF,eAAe2F,QAAQ/L,OAAOsL,QAAQhG,KAAK,SAASzE,MAChDb,OAAOqL,SAAWxK,KAClBb,OAAO2L,WAAa9K,KAAKmL,KAAKC,MAC9BjM,OAAO4L,SAAU,GAEnB,WACE5L,OAAO4L,SAAU,EACjB5L,OAAO2G,QAAS,GAElB,WACE3G,OAAO4L,SAAU,KAIvB5L,OAAOkM,WAAa,WAClB7F,UAAUoC,KAAK,UAGjBzI,OAAOmM,YAAc,WACnBnM,OAAOsL,OAAOc,QAAUpM,OAAOoM,QAC3BpM,OAAOqM,UACTrM,OAAOsL,OAAOc,QAAU,IAAMpM,OAAOoM,SAEvCpM,OAAO0L,YAAc,EACrB1L,OAAOsL,OAAOxD,KAAO,EACrB9H,OAAO6L,cAGT7L,OAAOsM,aAAe,WACpBtM,OAAO0L,YAAc,EACrB1L,OAAOsL,OAAOxD,KAAO,EACrB9H,OAAO6L,cAGT7L,OAAOuM,YAAc,SAASC,SAC5BxM,OAAO0L,YAAcc,QACrBxM,OAAOsL,OAAOxD,KAAO9H,OAAO0L,YAC5B1L,OAAO6L,cAGTvF,WAAWuC,IAAI,SAAU,SAASlI,MAAO8L,YACvCzM,OAAOsL,OAAOC,OAAUkB,WACxB9L,MAAM+L,iBACN1M,OAAO6L,eAGTvF,WAAWuC,IAAI,cAAe,WAC5B7I,OAAOsL,OAAS7F,EAAEkH,KAAK3M,OAAOsL,OAAQ,UACtCtL,OAAO0L,YAAc,EACrB1L,OAAOsL,OAAOxD,KAAO,EACrB9H,OAAO6L,eAGT7L,OAAO6L,gBC7DX,WAKI,GAMIhN,QANA+N,WAAa,YACbC,aAAe,+CAMnB,KACIhO,OAASD,QAAQC,OAAO+N,YAC1B,MAAME,KAEJjO,OAASD,QAAQC,OAAO+N,eAG5B/N,OAAOc,UAAU,eAAgB,WAAY,SAAU,WAAY,oBAAqB,SAASoN,SAAUC,OAAQxG,SAAUyG,mBACzH,OACIC,UAAU,EACVC,cAAc,EACd1L,SAAU,IACV2L,QAAS,SAAgCC,SAAUC,QAG3CD,SAAS,GAAGE,aAAa,uBAAyBF,SAAS,GAAGE,aAAa,4BAE3ED,OAAOE,KAAK,gBAAiBF,OAAOG,aACpCJ,SAASK,GAAGL,SAASpM,OAAS,GAAG0M,KAAK,iBAAiB,IAEvDL,OAAOE,KAAK,WAAYF,OAAOG,YAGnC,IAAIG,YAAaN,OAAOG,YAEpBI,MAAQD,WAAWC,MAAM,uEAEzBC,cAAgB,4BACpB,IAAsC,OAAlCD,MAAM,GAAGA,MAAMC,eACf,KAAM,8DAEV,IAAIC,2BAA4BF,MAAM,GAAGrD,QAAQsD,cAAe,IAC5DE,iBAAmBhB,OAAOe,2BAE1BE,aAAeX,OAAOW,cAAgB,WAG1C,OAFAhB,mBAAkBiB,iBAAiBD,cAE5B,SAA6BrO,MAAO8K,QAASyD,OAChD,GAEIC,mBAFAC,SAAYtB,SAASrC,SAAS,EAAO,IAGzC,IAAIyD,MAAMzC,YACN0C,kBAAoBpB,OAAOmB,MAAMzC,iBAC9B,CAEH,GAAI4C,oBAAqBL,aAAe,eACxCrO,OAAM0O,oBAAsB,EAC5BF,kBAAoBpB,OAAOsB,oBAE/BrB,kBAAkBsB,qBAAqBN,aAAcG,kBAAmBxO,OAExC,mBAArBuO,OAAMxC,YACbsB,kBAAkBuB,iBAAiBP,cACnCrO,MAAM6O,OAAO,WACT,MAAOzB,QAAOmB,MAAMxC,YAAY/L,QACjC,SAAU8O,QACAA,QAAL,GACAzB,kBAAkB0B,oBAAoBV,aAAcS,WAI5D9O,MAAMgP,iBAAiB,WACnB,MAAOZ,kBAAiBpO,QACzB,SAASiP,YACJA,YACA5B,kBAAkB0B,oBAAoBV,aAAcY,WAAW5N,UAM3EoN,SAASzO,aAMzBf,OAAOc,UAAU,yBAA0B,oBAAqB,SAASsN,mBAYrE,QAAS6B,oBAAmBpD,YAAaqD,iBAAkBC,YAAaC,iBACpE,GAGIC,UAHAC,SACAC,WAAanL,KAAKoL,KAAKN,iBAAmBC,aAC1CM,QAAUrL,KAAKoL,KAAKJ,gBAAkB,EAItCC,UADeI,SAAf5D,YACW,QACmBA,YAAvB0D,WAAaE,QACT,MAEA,QAKf,KAFA,GAAIC,gBAAmCH,WAAlBH,gBACjBO,EAAI,EACIJ,YAALI,GAAwBP,iBAALO,GAAsB,CAC5C,GAAIC,YAAaC,oBAAoBF,EAAG9D,YAAauD,gBAAiBG,YAElEO,sBAA+B,IAANH,IAAyB,WAAbN,UAAsC,QAAbA,UAC9DU,sBAAyBJ,IAAMP,gBAAkB,IAAmB,WAAbC,UAAsC,UAAbA,SAEhFC,OAAMjO,KADNqO,iBAAmBI,uBAAyBC,uBACjC,MAEAH,YAEfD,IAEJ,MAAOL,OAYX,QAASO,qBAAoBF,EAAG9D,YAAauD,gBAAiBG,YAC1D,GAAIE,SAAUrL,KAAKoL,KAAKJ,gBAAgB,EACxC,OAAIO,KAAMP,gBACCG,WACM,IAANI,EACAA,EACkBJ,WAAlBH,gBACoBvD,YAAvB0D,WAAaE,QACNF,WAAaH,gBAAkBO,EACrB9D,YAAV4D,QACA5D,YAAc4D,QAAUE,EAExBA,EAGJA,EAlEf,GAAIK,aAAc,OAsElB,QACIpF,SAAU,KACVnL,YAAa,SAASwQ,KAAM3B,OACxB,MAAOA,OAAM7O,aAAeuN,cAEhCjN,OACImQ,QAAS,KACTC,aAAc,MAElBjQ,KAAM,SAASH,MAAO8K,QAASyD,OAyC3B,QAAS8B,UAASC,KACVC,kBAAkBD,OAClBtQ,MAAMuP,MAAQL,mBAAmBoB,IAAKjD,kBAAkBmD,oBAAoBnC,cAAehB,kBAAkBoD,gBAAgBpC,cAAegB,iBAC5IrP,MAAM0Q,WAAWC,QAAUL,IAGvBtQ,MAAMoQ,cACNpQ,MAAMoQ,cAAeQ,cAAgBN,OAKjD,QAASO,sBACL,GAAI3I,MAAO4I,SAASzD,kBAAkB0D,eAAe1C,gBAAkB,CAEvErO,OAAMuP,MAAQL,mBAAmBhH,KAAMmF,kBAAkBmD,oBAAoBnC,cAAehB,kBAAkBoD,gBAAgBpC,cAAegB,iBAC7IrP,MAAM0Q,WAAWC,QAAUzI,KAC3BlI,MAAM0Q,WAAWM,KAAOhR,MAAMuP,MAAMvP,MAAMuP,MAAMlO,OAAS,GACrDrB,MAAM0Q,WAAWM,KAAOhR,MAAM0Q,WAAWC,SACzC3Q,MAAMiR,WAAWjR,MAAM0Q,WAAWM,MAI1C,QAAST,mBAAkBD,KACvB,MAAQL,aAAYiB,KAAKZ,MAAaA,IAAJ,GAAWA,KAAOtQ,MAAM0Q,WAAWM,KAhEzE,GAAI3C,aAMJ,IALAA,aAAeE,MAAMF,cAAgB,YAChCrO,MAAMmQ,UAAWnQ,MAAMmQ,QAAU,GACtCnQ,MAAMmR,eAAiBnS,QAAQoS,UAAU7C,MAAM4C,gBAAkBnR,MAAMqR,QAAQC,MAAM/C,MAAM4C,iBAAkB,EAC7GnR,MAAMuR,cAAgBvS,QAAQoS,UAAU7C,MAAMgD,eAAiBvR,MAAMqR,QAAQC,MAAM/C,MAAMgD,gBAAiB,GAErGlE,kBAAkBmE,aAAanD,cAAe,CAC/C,GAAIoD,WAA8B,cAAjBpD,aAAgC,SAAWA,aAAe,KAAO,GAClF,MAAM,gDAAkDoD,UAAY,iEAGxE,GAAIpC,iBAAkBhL,KAAKqN,IAAI1R,MAAMmQ,QAAS,EAC9CnQ,OAAMuP,SACNvP,MAAM0Q,YACFM,KAAM,EACNL,QAAS,GAGb3Q,MAAM6O,OAAO,WACT,OAAQxB,kBAAkBmD,oBAAoBnC,cAAgB,GAAKhB,kBAAkBoD,gBAAgBpC,eACtG,SAAShN,QACAA,OAAJ,GACAwP,uBAIR7Q,MAAM6O,OAAO,WACT,MAAOxB,mBAAkB0D,eAAe1C,eACzC,SAASvC,YAAa6F,cACjB7F,aAAe6F,cACftB,SAASvE,eAIjB9L,MAAMiR,WAAa,SAASX,KACpBC,kBAAkBD,MAClBjD,kBAAkBuE,eAAevD,aAAciC,WAkCnErR,OAAO4M,OAAO,gBAAiB,oBAAqB,SAASwB,mBACzD,MAAO,UAAS4B,WAAY4C,aAAcxD,cAItC,GAH8B,mBAAnB,gBACPA,aAAe,cAEdhB,kBAAkBmE,aAAanD,cAChC,KAAM,2DAA6DA,aAAe,8CAEtF,IAAIyD,KACAtK,KACJ,OAAIyH,sBAAsB8C,QACtBF,aAAef,SAASe,eAAiB,WAErCrK,MADA6F,kBAAkB2E,YAAY3D,cACtB,GAEChB,kBAAkB0D,eAAe1C,cAAgB,GAAKwD,aAEnEC,IAAMtK,MAAQqK,aACdxE,kBAAkB4E,gBAAgB5D,aAAcwD,cAEzC5C,WAAWiD,MAAM1K,MAAOsK,MAExB7C,eAKnBhQ,OAAOwD,QAAQ,oBAAqB,WAChC,GACI0P,wBADAC,YAGJnM,MAAKqI,iBAAmB,SAAS+D,YACQ,mBAA1BD,WAAUC,cACjBD,UAAUC,aACNC,WAAW,GAEfH,uBAAyBE,aAIjCpM,KAAKuL,aAAe,SAASa,YACzB,MAAyC,mBAA1BD,WAAUC,aAG7BpM,KAAKsM,kBAAoB,WACrB,MAAOJ,yBAGXlM,KAAK0I,qBAAuB,SAAS0D,WAAYjR,IAAKpB,OAClDoS,UAAUC,YAAYG,kBAAoBpR,IAC1CgR,UAAUC,YAAYI,QAAUzS,OAEpCiG,KAAK2L,eAAiB,SAASS,WAAYjR,KACvCgR,UAAUC,YAAYG,kBAAkBE,OAAON,UAAUC,YAAYI,QAASrR,MAElF6E,KAAK8K,eAAiB,SAASsB,YAC3B,GAAIM,QAASP,UAAUC,YAAYG,iBACnC,OAAOG,QAASA,OAAOP,UAAUC,YAAYI,SAAW,GAG5DxM,KAAKgM,gBAAkB,SAASI,WAAYjR,KACxCgR,UAAUC,YAAYR,aAAezQ,KAEzC6E,KAAKwK,gBAAkB,SAAS4B,YAC5B,MAAOD,WAAUC,YAAYR,cAGjC5L,KAAK8I,oBAAsB,SAASsD,WAAYjR,KAC5CgR,UAAUC,YAAYlD,iBAAmB/N,KAE7C6E,KAAKuK,oBAAsB,SAAS6B,YAChC,MAAOD,WAAUC,YAAYlD,kBAGjClJ,KAAK2I,iBAAmB,SAASyD,YAC7BD,UAAUC,YAAYC,WAAY,GAGtCrM,KAAK+L,YAAc,SAASK,YACxB,MAAOD,WAAUC,YAAYC,gBC7UzCtT,QAAQC,OAAO,aACVU,WAAW,YAAa,SAASS,OAAQwS,YAAanM,UAAWC,YAC9DA,WAAWI,eAAgB,EAC3BJ,WAAWG,gBAAiB,EAC5BzG,OAAOyS,SAAW,GAClBzS,OAAO0S,SAAW,GAClB1S,OAAO2S,YAAc,WACjBH,YAAYI,MAAM5S,OAAOyS,SAAUzS,OAAO0S,aCPtD9T,QAAQC,OAAO,aACZgU,SAAS,eACRlJ,KAAM,aACNjB,MAAO,cACPF,QAAS,gBACTG,MAAO,gBAERhJ,UAAU,QAAS,WAClB,OACEL,YAAa,0BACbmL,SAAS,IACTlL,WAAY,SAASS,OAAQuG,aAE3BvG,OAAO6I,IAAItC,YAAYoD,KAAM,SAAShJ,MAAO+I,SAC3C1J,OAAO8S,aAAeC,MAAM,GAC5B/S,OAAOgT,YAActJ,UAGvB1J,OAAO6I,IAAItC,YAAYmC,MAAO,SAAS/H,MAAO+I,SAC5C1J,OAAO8S,aAAelN,OAAM,GAC5B5F,OAAOiT,aAAevJ,UAGxB1J,OAAO6I,IAAItC,YAAYiC,QAAS,SAAS7H,MAAO+I,SAC9C1J,OAAO8S,aAAgB9N,SAAS,GAChChF,OAAOkT,eAAiBxJ,UAG1B1J,OAAO6I,IAAItC,YAAYoC,MAAO,WAC5B3I,OAAO8S,YAAc,WC9B/BlU,QAAQC,OAAO,aACZsU,QAAQ,mBAAoB,aAAc,KAAM,UAAW,YAAa,YAAa,oBAAqB,SAAS7M,WAAY/D,GAAI6Q,QAAS/M,UAAWgN,UAAWC,mBACjK,OACEC,QAAW,SAASzU,QAOlB,MANAA,QAAO0U,QAAU1U,OAAO0U,YACpBJ,QAAQK,eAAeC,QACpB5U,OAAOuG,4BACVvG,OAAO0U,QAAQG,cAAgB,OAASP,QAAQK,eAAeC,QAG5D5U,QAET8U,cAAiB,SAAS3O,UACxB,GAAIA,SAASnG,SAAWmG,SAASnG,OAAO0U,QAAQK,kBACtB,MAApB5O,SAAS6O,OAAgB,CAC3B,GAAIC,UAAWxR,GAAGQ,OAClBuQ,mBAAkBpQ,OAAO+B,SAASnG,OAAQiV,SAC1C,IAAIvB,aAAca,UAAU3L,IAAI,cAChC8K,aAAYwB,eAGhB,MAAOzR,IAAGiC,OAAOS,eAItBnG,QAAQ,gBAAiB,SAASE,eACjCA,cAAciV,aAAa/S,KAAK,sBAEjCmB,QAAQ,eAAgB,UAAW,QAAS,aAAc,YAAa,oBAAqB,SAAS+Q,QAAS9Q,MAAOgE,WAAYD,UAAWiN,mBAC3I,GAAIY,QAAS,SAASzB,SAAUC,UAC9B,MAAOpQ,OAAMgG,KAAK,oBACdmK,SAAYA,SACZC,SAAYA,WAEbpN,KAAK,SAASL,UACbmO,QAAQK,eAAeC,MAAQzO,SAASpE,KAAK6S,MAC7CrN,UAAUoC,KAAK,QAGjB0L,cAAgB,WAClB,MAAO7R,OAAMgG,KAAK,uBACdoL,MAASN,QAAQK,eAAeC,QAEhCG,kBAAoB,IACnB7O,QAAQ,SAASC,UAClBmO,QAAQK,eAAeC,MAAQzO,SAASyO,MACxCJ,kBAAkBc,aAEnBxO,MAAM,WACL0N,kBAAkBe,YAClBhO,UAAUoC,KAAK,YAIrB,QACEmK,MAAOsB,OACPF,aAAcG,kBAIjBhB,QAAQ,qBAAsB,YAC7B,SAASE,WAKP,QAASiB,mBAAkBxV,OAAQiV,UACjC,QAAS/N,iBAAgBf,UACvB8O,SAASzP,QAAQW,UAGnB,QAASgB,eAAchB,UACrB8O,SAASvP,OAAOS,UAElB3C,MAAQA,OAAS+Q,UAAU3L,IAAI,SAC/B5I,OAAO0U,QAAQK,kBAAmB,EAClCvR,MAAMxD,QAAQwG,KAAKU,gBAAiBC,eAdtC,GAEI3D,OAFAiS,SAiBJ,QACErR,OAAQ,SAASpE,OAAQiV,UACvBQ,OAAOrT,MACLpC,OAAQA,OACRiV,SAAUA,YAGdM,UAAW,SAASG,QACdA,QACF/O,EAAEgP,KAAKF,OAAQ,SAAShB,SACtBA,QAAQQ,SAASvP,OAAOgQ,UAG5BD,WAEFH,SAAU,WACR3O,EAAEgP,KAAKF,OAAQ,SAAShB,SACtBe,kBAAkBf,QAAQzU,OAAQyU,QAAQQ,YAE5CQ,eCjGV3V,QAAQC,OAAO,aACZc,UAAU,gBAAiB,WAC1B,OACE8K,SAAU,IACVnL,YAAa,0BACbM,OACE8U,YAAa,gBAGfnV,WAAY,SAASS,QACnBA,OAAO2U,kBACLC,SACEC,OACE3K,KAAM,MACN4K,gBAAiB,cACjB7J,OAAQ,GACR8J,OAAQ,EACR/J,MAAO,IAETgK,WAAaC,SAAS,GACtBC,SAAWD,SAAS,GACpBE,SAAWF,SAAS,GACpBG,QAAS,UAAW,YAEtBC,SACEC,YAAcL,SAAS,GACvBM,QACEC,OACGP,SAAS,IAGdQ,WAAW,EACXC,WAAY,IACZC,SAAU,GACVC,QAAS,MAAO,OAChBC,UAAW,MACXvL,KAAM,WACNzJ,MACE6P,SAAS1Q,OAAO0U,aACf,IAAMhE,SAAS1Q,OAAO0U,gBAG3BoB,OACEC,KAAM,IAERC,UACED,KAAM,IAERnK,SAAS,OChDnBhN,QAAQC,OAAO,aACb4M,OAAO,iBAAkB,WACvB,MAAO,UAAUwK,OACf,MAAIA,OACKC,OAAOC,IAAIF,OAAOG,QAAQC,OAAO,sBAEnCJ,SCPbrX,QAAQC,OAAO,aACZc,UAAU,cAAe,UAAW,SAAS2W,SAC5C,OACE1W,OACE2W,KAAQ,KAEV/L,SAAS,EACTgM,QAAQ,UACRC,SAAU,4DACV1W,KAAM,SAASH,MAAO8K,QAASyD,MAAOuI,SACpC9W,MAAM+W,SAAWxI,MAAMwI,WAAY,CAEnC,IAAIC,WAAY,GAAIC,KACD,gBAAf1I,MAAM2I,OACRF,UAAUG,WAAW,GACrBH,UAAUI,SAAS,GACnBJ,UAAUK,WAAW,IAEJ,aAAf9I,MAAM2I,OACRF,UAAUG,WAAW,IACrBH,UAAUI,SAAS,IACnBJ,UAAUK,WAAW,KAGvBvM,QAAQwM,gBACNb,OAAQ,cACRO,UAAWA,UACXO,KAAM,IAER,IAAIC,WAAY,SAASC,OACvB,MAAOf,SAAQ,kBAAkBe,OAEnCX,SAAQY,YAAYC,QAAQH,WAE5BV,QAAQc,SAASD,QAAQ,SAASF,OAChC,GAAII,cAAe,uBACnB,OAAIJ,OACKnB,OAAOmB,OAAOhB,OAAOoB,cAErBvB,SAASG,OAAOoB,qBCtCnC7Y,QAAQC,OAAO,aACZc,UAAU,WAAY,WACrB,OACEL,YAAa,yCACbM,OACIC,QAAW,QCLrBjB,QAAQC,OAAO,aACZc,UAAU,SAAU,WACnB,OACI8K,SAAY,IACZnL,YAAe,4BACfC,WAAc,SAASS,OAAQsG,WAAYoR,SACvC1X,OAAOyM,WAAa,GACpBzM,OAAO0X,QAAUA,QACjB1X,OAAOmI,YAAc,WACjB7B,WAAWiC,WAAW,kBAG1BvI,OAAOuL,OAAS,WACZjF,WAAWiC,WAAW,SAAUvI,OAAOyM,aAE3CzM,OAAO2X,YAAc,WACnBrR,WAAWiC,WAAW,eACtBvI,OAAOyM,WAAa,QCjBlC7N,QAAQC,OAAO,aACZsU,QAAQ,iBACP,SAASyE,aAIP,MAHAA,aAAYC,WAAW,SACvBD,YAAYE,iBAAiB,KAEtBF,YAAYvV,QAAQ,oBAE9BvD,OAAO,SAASiZ,qBAGfA,oBAAoBC,uBAAuB,SAASnX,KAAMoX,WACxD,GAAkB,YAAdA,UAAyB,CAC3B,GAAIC,SAAUrX,KAAKqX,OAOnB,OANAA,SAAQlM,MACNC,MAAOpL,KAAKoL,MACZkM,KAAMtX,KAAKsX,KACXC,KAAMvX,KAAKuX,MAGNF,QAET,MAAOrX,UCtBbjC,QAAQC,OAAO,aACb4M,OAAO,cAAe,SAAS4M,gBAC7B,MAAO,UAAUpC,OACf,MAAIA,OACKA,MAEAoC","sourcesContent":["'use strict';\n\n// ****** App Config ****** \\\\\n\nangular.module('video-ads', [\n  'ngCookies',\n  'ngRoute',\n  'ngAnimate',\n  'ngMessages',\n  'restangular',\n  'highcharts-ng'\n])\n  .config(function($locationProvider, $httpProvider, $routeProvider, $sceDelegateProvider) {\n    $sceDelegateProvider.resourceUrlWhitelist(['self', 'http://assets.onionstatic.com/videoads/*', 'http://onionwebtech.s3.amazonaws.com/videoads/**', 'http://onionwebtech.s3.amazonaws.com/videoads-test/**', 'http://v.theonion.com/**']);\n\n    $locationProvider.html5Mode(true);\n\n    $routeProvider\n      .when('/', {\n        templateUrl: 'components/videoAdList/videoAdList.html',\n        controller: 'VideoAdListController',\n        reloadOnSearch: false\n      })\n      .when('/login', {\n        templateUrl: 'components/login/login.html',\n        controller: 'LoginCtrl'\n      })\n      .when('/edit/:videoAdId/', {\n        templateUrl: 'components/detail/videoAdDetail.html',\n        controller: 'VideoAdDetailController'\n      })\n      .when('/new/', {\n        templateUrl: 'components/detail/videoAdDetail.html',\n        controller: 'VideoAdDetailController'\n      })\n      .when('/exclusion/:exclusionName/', {\n        templateUrl: 'components/exclusion/exclusion.html',\n        controller: 'ExclusionCtrl'\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  });\n","'use strict';\n\nangular.module('video-ads')\n\t.directive('pixels', function() {\n\t\treturn {\n\t\t\ttemplateUrl: 'components/detail/pixels.html',\n\t\t\tscope: {\n\t\t\t\t'videoad': '=',\n\t\t\t\t'pixels': '='\n\t\t\t},\n\t\t\tlink: function($scope, elem, attrs){\n\t\t\t\t$(\"#pixels-wrapper\").on('keypress', 'input', function(e){\n\t\t\t\t\tif(e.keyCode === 13){\n\t\t\t\t\t\t$(e.target).parent().find('button').click();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t$scope.addPixel = function(e){\n\t\t\t\t\tvar bt = $(e.target);\n\t\t\t\t\tvar event = $(bt).parents('[data-event]').data('event');\n\t\t\t\t\tvar pixel = $(bt).parent().siblings('input').val()\n\t\t\t\t\tif(pixel.length > 0){\n\t\t\t\t\t\t$scope.videoad.pixels[event].push(pixel)\n\t\t\t\t\t\t$(bt).parent().siblings('input').val('')\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.removePixel = function(event, index){\n\t\t\t\t\t$scope.videoad.pixels[event].splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n","'use strict';\n\nangular.module('video-ads')\n  .directive('targeting', function () {\n    return {\n      templateUrl: 'components/detail/targeting.html',\n      scope: {\n        'target': '=',\n        'targets': '='\n      },\n      link: function ($scope, elem, attrs) {\n        $scope.priorities = [\n          'low',\n          'medium',\n          'high'\n        ];\n\n        $scope.addTargetingGroup = function () {\n          $scope.target.push({\"priority\": \"medium\", \"rules\": [['', 'is', '']]});\n        };\n        $scope.removeTargetingGroup = function (index, confirm) {\n          if (confirm) {\n            $scope.target.splice(index, 1);\n            $(\"#confirm-remove-group-modal\").modal('hide')\n          } else {\n            $(\"#confirm-remove-group-modal-button\").off('click');\n            $(\"#confirm-remove-group-modal-button\").click(function () {\n              $scope.removeTargetingGroup(index, true);\n              $scope.$apply();\n            });\n            $(\"#confirm-remove-group-modal\").modal('show')\n          }\n        }\n        $scope.addTargetingRow = function (index) {\n          $scope.target[index][\"rules\"].push(['', 'is', '']);\n        }\n        $scope.removeTargetingRow = function (parentIndex, index) {\n          $scope.target[parentIndex][\"rules\"].splice(index, 1);\n          if ($scope.target[parentIndex][\"rules\"].length == 0) {\n            $scope.target.splice(parentIndex, 1);\n          }\n        }\n      }\n    }\n  });\n","'use strict';\n\nangular.module('video-ads')\n  .directive('videoEditForm', function() {\n    return {\n      templateUrl: 'components/detail/videoDetail.html',\n      scope: {\n        'video': '=',\n        'adid': '=',\n        'index': '='\n      }\n    };\n  });\n","'use strict';\n\nangular.module('video-ads')\n  .service('Zencoder', function Zencoder($http, $q, $interval) {\n\n    this.uploadToS3AndEncode = function(config) {\n      var uploadToS3AndEncodeDeferred = $q.defer();\n      var file = config.file;\n      var videoObject = config.videoObject;\n      var successCallback = function(success) {\n        uploadToS3AndEncodeDeferred.resolve(success);\n      };\n      var errorCallback = function(error) {\n        uploadToS3AndEncodeDeferred.reject(error);\n      };\n      var notifyCallback = function(notify) {\n        uploadToS3AndEncodeDeferred.notify(notify);\n      };\n\n      uploadToS3(file, videoObject)\n        .then(encode, errorCallback, notifyCallback)\n        .then(successCallback, errorCallback, notifyCallback);\n\n      return uploadToS3AndEncodeDeferred.promise;\n    };\n\n    function uploadToS3(file, videoObject) {\n      var s3Config = videoObject.encoding_payload;\n      var s3deferred = $q.defer();\n\n      var formData = new FormData();\n      formData.append('key', s3Config.key);\n      formData.append('AWSAccessKeyId', s3Config.AWSAccessKeyId);\n      formData.append('acl', s3Config.acl);\n      formData.append('success_action_status', s3Config.success_action_status);\n      formData.append('policy', s3Config.policy);\n      formData.append('signature', s3Config.signature);\n      formData.append('file', file);\n      //We use XMLHttpRequest here becuase angular's http methods don't support progress updates.\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', s3Config.upload_endpoint);\n\n      xhr.upload.onprogress = function(e) {\n        if (e.lengthComputable) {\n          s3deferred.notify('Upload ' + Math.round(e.loaded / e.total * 100) + '% complete');\n        } else {\n          s3deferred.notify('Uploading...');\n        }\n      };\n\n      xhr.onload = function() {\n        s3deferred.notify('Upload Complete. Begin Encoding.');\n        s3deferred.resolve(videoObject);\n      };\n\n      xhr.addEventListener('error', function() {\n        s3deferred.reject('Upload failed.');\n      });\n\n      xhr.send(formData);\n      return s3deferred.promise;\n\n    }\n\n    function encode(videoObject) {\n      var encodeDeferred = $q.defer();\n      //TODO: kill off this magic string\n      $http({\n        method: 'POST',\n        url: 'api/videos/' + videoObject.id + '/encode/'\n      }).success(function(response) {\n        var zencoderProgressEndpoint = response.json;\n        var progressInterval = $interval(function() {\n          $http({\n            url: zencoderProgressEndpoint,\n            method: 'GET',\n            'ignoreAuthorizationHeader': true\n          }).then(function(response) {\n            if (response.data.state === 'finished') {\n              encodeDeferred.resolve(videoObject);\n              $interval.cancel(progressInterval);\n            } else if (response.data.state === 'failed') {\n              encodeDeferred.reject('Encoding has failed.');\n              $interval.cancel(progressInterval);\n            } else {\n              if (!_.isUndefined(response.data.progress)) {\n                encodeDeferred.notify('Encoding: ' + Math.round(response.data.progress) + '%');\n              }\n            }\n          });\n        }, 1000);\n      }).error(function(data) {\n        encodeDeferred.reject(data);\n      });\n      return encodeDeferred.promise;\n    }\n  });\n","'use strict';\n\nangular.module('video-ads')\n  .controller('VideoAdDetailController', ['$scope', '$routeParams', 'videoAdService', '$location', '$rootScope', 'AlertEvents', '$timeout', function($scope, $routeParams, videoAdService, $location, $rootScope, AlertEvents, $timeout) {\n    $rootScope.showSaveButton = true;\n    $rootScope.showSearchBar = false;\n    $scope.success = false;\n    $scope.errors = false;\n    $scope.videoad = {};\n    $scope.page_targets = [\n      'dfp_adchannel',\n      'dfp_pagetype',\n      'dfp_viewport',\n      'dfp_channel',\n      'dfp_articletype',\n      'dfp_site',\n      'dfp_articleid',\n      'dfp_contentid',\n      'dfp_feature'\n    ];\n    $scope.user_targets = [\n      'city',\n      'region',\n      'country_code'\n    ];\n\n    var defaultPixelsObject = {\n      'impression': [],\n      'clickThrough': [],\n      'complete': [],\n      'firstQuartile': [],\n      'midpoint': [],\n      'start': [],\n      'thirdQuartile': []\n    };\n\n    $scope.getAndInitVideoAd = function() {\n      if (_.isUndefined($routeParams.videoAdId)) {\n        $scope.videoad = {};\n        $scope.videoad.id = null;\n        $scope.initVideoAd();\n      } else {\n        videoAdService.one($routeParams.videoAdId).get().then(\n          function(data) {\n            $scope.videoad = data;\n            $scope.initVideoAd();\n          },\n          function(data) {\n            console.log(data);\n          }\n        );\n      }\n    };\n\n\n    $scope.initVideoAd = function() {\n      if (!$scope.videoad.targeting) {\n        $scope.videoad.targeting = {};\n      }\n      if (!$scope.videoad.targeting.page) {\n        $scope.videoad.targeting.page = [];\n      }\n      if (!$scope.videoad.targeting.user) {\n        $scope.videoad.targeting.user = [];\n      }\n      $scope.videoad.videos = $scope.videoad.videos || [];\n      $scope.videoad.pixels = $scope.videoad.pixels || defaultPixelsObject;\n    };\n\n    $scope.addTargetingKey = function(key) {\n      $scope.targetingKey = key;\n    };\n\n    $scope.saveVideoAd = function() {\n      if ($scope.videoAdDetailForm.$valid) {\n        if (!_.isUndefined($routeParams.videoAdId)) {\n          $scope.videoad.save().then(function() {\n            $rootScope.$broadcast(AlertEvents.SUCCESS, 'Saved');\n            $timeout(function() {\n              $rootScope.$broadcast(AlertEvents.CLEAR);\n            }, 2000);\n          }, function() {\n            $rootScope.$broadcast(AlertEvents.ERROR, 'Something went wrong with saving the video. Please call your friendly sysadmin.');\n            $timeout(function() {\n              $rootScope.$broadcast(AlertEvents.CLEAR);\n            }, 2000);\n          });\n        } else {\n          videoAdService.post($scope.videoad)\n            .then(\n              function(data) {\n                $rootScope.$broadcast(AlertEvents.SUCCESS, 'Saved');\n                $timeout(function() {\n                  $location.path('/edit/' + data.id + '/');\n                  $scope.$apply();\n                }, 2000);\n              },\n              function() {\n                $rootScope.$broadcast(AlertEvents.ERROR, 'Something went wrong with saving the video. Please call your friendly sysadmin.');\n                $timeout(function() {\n                  $rootScope.$broadcast(AlertEvents.CLEAR);\n                }, 2000);\n              });\n        }\n      } else {\n        $rootScope.$broadcast(AlertEvents.ERROR, 'Please fill in all required fields.');\n        $timeout(function() {\n          $rootScope.$broadcast(AlertEvents.CLEAR);\n        }, 2000);\n      }\n    };\n\n    $scope.$on('save-video-ad', function() {\n      $scope.saveVideoAd();\n    });\n\n    $scope.addVideo = function() {\n      $scope.videoad.videos.push({\n        adId: $scope.videoad.id\n      });\n    };\n    $scope.getAndInitVideoAd();\n  }]);\n","'use strict';\n\nangular.module('video-ads')\n  .directive('videoField', function(Zencoder, $q, $http, $timeout) {\n    return {\n      templateUrl: 'components/detail/videoField.html',\n      transclude: true,\n      controller: function($scope, $rootScope, AlertEvents) {\n        $scope.removeVideo = function() {\n          $scope.video = null;\n        };\n\n        $scope.uploadVideo = function() {\n          var fileField = $('#' + $scope.index + '-file-field');\n          fileField.unbind('change');\n          fileField.bind('change', function(event) {\n            var file = event.target.files[0];\n            $scope.validateVideoFile(file)\n              .then($scope.addVideoToAdvertisement)\n              .then(Zencoder.uploadToS3AndEncode)\n              .then(\n                function() {\n                  $rootScope.$broadcast(AlertEvents.SUCCESS, 'Upload Complete');\n\n                },\n                function(error) {\n                  $rootScope.$broadcast(AlertEvents.ERROR, error);\n                  $timeout(function() {\n                    $rootScope.$broadcast(AlertEvents.CLEAR);\n                  }, 2000);\n                },\n                function(message) {\n                  if (!_.isUndefined(message)) {\n                    $rootScope.$broadcast(AlertEvents.INFO, message);\n                  }\n                })\n              .then(fetchNewVideoObject);\n          });\n          fileField.click();\n        };\n\n        var fetchNewVideoObject = function() {\n          // We reload the video after all of the fun is over, in order to update it with the new sources.\n          $http.get('/api/videos/' + $scope.video.id + '/')\n            .then(function(response) {\n              if (_.isEmpty(response.data.sources)) {\n                $timeout(fetchNewVideoObject, 2000);\n              } else {\n                //We set them like this first because if we just do response.data, it MESSES EVERYTHING UP, and the changes aren't detected.\n                $scope.video.sources = response.data.sources;\n                $scope.video.poster = response.data.poster;\n                $scope.video = response.data;\n                $timeout(function() {\n                  $rootScope.$broadcast(AlertEvents.CLEAR);\n                }, 2000);\n              }\n            });\n        };\n\n        $scope.validateVideoFile = function(file) {\n          var validateVideoFileDeferred = $q.defer();\n          if (file) {\n            if (file.size > (1024 * 1024 * 1024)) {\n              validateVideoFileDeferred.reject('Upload file cannot be larger than 1024MB.');\n            } else if (file.type.indexOf('video/') !== 0) {\n              validateVideoFileDeferred.reject('You must upload a video file.');\n            } else {\n              validateVideoFileDeferred.resolve(file);\n            }\n            validateVideoFileDeferred.reject('Please select a file.');\n          }\n          return validateVideoFileDeferred.promise;\n        };\n\n        $scope.addVideoToAdvertisement = function(file) {\n          var addVideoToAdvertisementDeferred = $q.defer();\n          $http.post('/api/videos/', {\n            'advertisement': $scope.adid,\n            'name': file.name\n          }).then(function(response) {\n            $scope.video = response.data;\n            var uploadToS3Arguments = {\n              'file': file,\n              'videoObject': $scope.video\n            };\n            addVideoToAdvertisementDeferred.resolve(uploadToS3Arguments);\n          });\n          return addVideoToAdvertisementDeferred.promise;\n        };\n      }\n    };\n  });\n","'use strict';\n\nangular.module('video-ads')\n  .directive('videoPlayerModal', [ function() {\n    return {\n      replace: false,\n      restrict: 'E',\n      transclude: true,\n      templateUrl: 'shared/videoplayermodal/videoplayermodal.html',\n      link: function(scope, element) {\n        var currentVideo = element.find('video')[0];\n        scope.player = videojs(currentVideo, {\n          'controls': true,\n          'autoplay': false,\n          'width': 'auto',\n          'height': 'auto'\n        });\n\n        element.find('.modal').on('hidden.bs.modal', function(){\n          scope.player.pause();\n        });\n\n        scope.$on('$destroy', function(){\n          scope.player.dispose();\n        });\n      }\n    };\n  }]);\n","'use strict';\n\nangular.module('video-ads')\n    .controller('ExclusionCtrl', function ($scope, $http, $rootScope, AlertEvents, $timeout) {\n        $scope.exclusion = {};\n        $scope.exclusion.targeting = {};\n        $scope.exclusion.targeting.page = [];\n        $scope.exclusion.targeting.user = [];\n\n\n        $scope.page_targets = [\n            'dfp_adchannel',\n            'dfp_pagetype',\n            'dfp_viewport',\n            'dfp_channel',\n            'dfp_articletype',\n            'dfp_site',\n            'dfp_articleid',\n            'dfp_contentid'\n        ];\n        $scope.user_targets = [\n            'city',\n            'region',\n            'country_code'\n        ];\n\n        $http({\n            method: 'GET',\n            url: '/api/exclusion-rules/' + '1'  + '/'\n        }).then(function(response){\n            $scope.exclusion = response.data;\n        }, function (error){\n          console.log(error);\n        });\n\n        $scope.save = function() {\n            var data = $scope.exclusion;\n            $http({\n                method: 'PUT',\n                url: '/api/exclusion-rules/' + $scope.exclusion.id + '/',\n                data: data\n            }).success(function(){\n                $rootScope.$broadcast(AlertEvents.SUCCESS, 'Saved. You\\'re welcome.');\n                $timeout(function() {\n                  $rootScope.$broadcast(AlertEvents.CLEAR);\n                }, 2000);\n            }).error(function(){\n                $rootScope.$broadcast(AlertEvents.ERROR, 'Something went wrong with saving this exclustion. Please call your friendly sysadmin.');\n                $timeout(function() {\n                  $rootScope.$broadcast(AlertEvents.CLEAR);\n                }, 2000);\n            });\n        };\n    });\n","'use strict';\nangular.module('video-ads')\n  .controller('VideoAdListController', ['$scope', '$location', 'videoAdService', '$routeParams', '$rootScope', function($scope, $location, videoAdService, $routeParams, $rootScope) {\n    $scope.videoAds = [];\n    $rootScope.showSearchBar = true;\n    $rootScope.showSaveButton = false;\n    if (_.isEmpty($location.search())) {\n      $scope.params = {\n        'page_size': 8,\n        'filter': 'active'\n      };\n    } else {\n      $scope.params = $location.search();\n    }\n    $scope.currentPage = 1;\n    $scope.totalItems = 0;\n    $scope.loading = true;\n    $scope.errors = false;\n\n    $scope.updateList = function() {\n      if ($scope.params.filter === undefined) {\n        $scope.params.filter = 'active';\n      }\n      $location.search($scope.params);\n      videoAdService.getList($scope.params).then(function(data) {\n          $scope.videoAds = data;\n          $scope.totalItems = data.meta.count;\n          $scope.loading = false;\n        },\n        function() {\n          $scope.loading = false;\n          $scope.errors = true;\n        },\n        function() {\n          $scope.loading = true;\n        });\n    };\n\n    $scope.newVideoAd = function() {\n      $location.path('/new/');\n    };\n\n    $scope.changeOrder = function() {\n      $scope.params.orderBy = $scope.orderBy;\n      if ($scope.reverse) {\n        $scope.params.orderBy = '-' + $scope.orderBy;\n      }\n      $scope.currentPage = 1;\n      $scope.params.page = 1;\n      $scope.updateList();\n    };\n\n    $scope.changeFilter = function() {\n      $scope.currentPage = 1;\n      $scope.params.page = 1;\n      $scope.updateList();\n    };\n\n    $scope.pageChanged = function(newPage) {\n      $scope.currentPage = newPage;\n      $scope.params.page = $scope.currentPage;\n      $scope.updateList();\n    };\n\n    $rootScope.$on('search', function(event, searchTerm) {\n      $scope.params.search  = searchTerm;\n      event.preventDefault();\n      $scope.updateList();\n    });\n\n    $rootScope.$on('clearSearch', function(){\n      $scope.params = _.omit($scope.params, 'search');\n      $scope.currentPage = 1;\n      $scope.params.page = 1;\n      $scope.updateList();\n    });\n\n    $scope.updateList();\n\n  }]);\n","/**\n * dirPagination - AngularJS module for paginating (almost) anything.\n *\n *\n * Credits\n * =======\n *\n * Daniel Tabuenca: https://groups.google.com/d/msg/angular/an9QpzqIYiM/r8v-3W1X5vcJ\n * for the idea on how to dynamically invoke the ng-repeat directive.\n *\n * I borrowed a couple of lines and a few attribute names from the AngularUI Bootstrap project:\n * https://github.com/angular-ui/bootstrap/blob/master/src/pagination/pagination.js\n *\n * Copyright 2014 Michael Bromley <michael@michaelbromley.co.uk>\n */\n\n(function() {\n\n    /**\n     * Config\n     */\n    var moduleName = 'video-ads';\n    var templatePath = 'components/videoAdList/dirPagination.tpl.html';\n\n    /**\n     * Module\n     */\n    var module;\n    try {\n        module = angular.module(moduleName);\n    } catch(err) {\n        // named module does not exist, so create one\n        module = angular.module(moduleName, []);\n    }\n\n    module.directive('dirPaginate', ['$compile', '$parse', '$timeout', 'paginationService', function($compile, $parse, $timeout, paginationService) {\n        return  {\n            terminal: true,\n            multiElement: true,\n            priority: 5000, // This setting is used in conjunction with the later call to $compile() to prevent infinite recursion of compilation\n            compile: function dirPaginationCompileFn(tElement, tAttrs){\n\n                // Add ng-repeat to the dom element\n                if (tElement[0].hasAttribute('dir-paginate-start') || tElement[0].hasAttribute('data-dir-paginate-start')) {\n                    // using multiElement mode (dir-paginate-start, dir-paginate-end)\n                    tAttrs.$set('ngRepeatStart', tAttrs.dirPaginate);\n                    tElement.eq(tElement.length - 1).attr('ng-repeat-end', true);\n                } else {\n                    tAttrs.$set('ngRepeat', tAttrs.dirPaginate);\n                }\n\n                var expression = tAttrs.dirPaginate;\n                // regex taken directly from https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js#L211\n                var match = expression.match(/^\\s*([\\s\\S]+?)\\s+in\\s+([\\s\\S]+?)(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);\n\n                var filterPattern = /\\|\\s*itemsPerPage\\s*:[^|]*/;\n                if (match[2].match(filterPattern) === null) {\n                    throw 'pagination directive: the \\'itemsPerPage\\' filter must be set.';\n                }\n                var itemsPerPageFilterRemoved = match[2].replace(filterPattern, '');\n                var collectionGetter = $parse(itemsPerPageFilterRemoved);\n\n                var paginationId = tAttrs.paginationId || '__default';\n                paginationService.registerInstance(paginationId);\n\n                return function dirPaginationLinkFn(scope, element, attrs){\n                    var compiled =  $compile(element, false, 5000); // we manually compile the element again, as we have now added ng-repeat. Priority less than 5000 prevents infinite recursion of compiling dirPaginate\n\n                    var currentPageGetter;\n                    if (attrs.currentPage) {\n                        currentPageGetter = $parse(attrs.currentPage);\n                    } else {\n                        // if the current-page attribute was not set, we'll make our own\n                        var defaultCurrentPage = paginationId + '__currentPage';\n                        scope[defaultCurrentPage] = 1;\n                        currentPageGetter = $parse(defaultCurrentPage);\n                    }\n                    paginationService.setCurrentPageParser(paginationId, currentPageGetter, scope);\n\n                    if (typeof attrs.totalItems !== 'undefined') {\n                        paginationService.setAsyncModeTrue(paginationId);\n                        scope.$watch(function() {\n                            return $parse(attrs.totalItems)(scope);\n                        }, function (result) {\n                            if (0 <= result) {\n                                paginationService.setCollectionLength(paginationId, result);\n                            }\n                        });\n                    } else {\n                        scope.$watchCollection(function() {\n                            return collectionGetter(scope);\n                        }, function(collection) {\n                            if (collection) {\n                                paginationService.setCollectionLength(paginationId, collection.length);\n                            }\n                        });\n                    }\n\n                    // Delegate to the link function returned by the new compilation of the ng-repeat\n                    compiled(scope);\n                };\n            }\n        };\n    }]);\n\n    module.directive('dirPaginationControls', ['paginationService', function(paginationService) {\n        var numberRegex = /^\\d+$/;\n        /**\n         * Generate an array of page numbers (or the '...' string) which is used in an ng-repeat to generate the\n         * links used in pagination\n         *\n         * @param currentPage\n         * @param rowsPerPage\n         * @param paginationRange\n         * @param collectionLength\n         * @returns {Array}\n         */\n        function generatePagesArray(currentPage, collectionLength, rowsPerPage, paginationRange) {\n            var pages = [];\n            var totalPages = Math.ceil(collectionLength / rowsPerPage);\n            var halfWay = Math.ceil(paginationRange / 2);\n            var position;\n\n            if (currentPage <= halfWay) {\n                position = 'start';\n            } else if (totalPages - halfWay < currentPage) {\n                position = 'end';\n            } else {\n                position = 'middle';\n            }\n\n            var ellipsesNeeded = paginationRange < totalPages;\n            var i = 1;\n            while (i <= totalPages && i <= paginationRange) {\n                var pageNumber = calculatePageNumber(i, currentPage, paginationRange, totalPages);\n\n                var openingEllipsesNeeded = (i === 2 && (position === 'middle' || position === 'end'));\n                var closingEllipsesNeeded = (i === paginationRange - 1 && (position === 'middle' || position === 'start'));\n                if (ellipsesNeeded && (openingEllipsesNeeded || closingEllipsesNeeded)) {\n                    pages.push('...');\n                } else {\n                    pages.push(pageNumber);\n                }\n                i ++;\n            }\n            return pages;\n        }\n\n        /**\n         * Given the position in the sequence of pagination links [i], figure out what page number corresponds to that position.\n         *\n         * @param i\n         * @param currentPage\n         * @param paginationRange\n         * @param totalPages\n         * @returns {*}\n         */\n        function calculatePageNumber(i, currentPage, paginationRange, totalPages) {\n            var halfWay = Math.ceil(paginationRange/2);\n            if (i === paginationRange) {\n                return totalPages;\n            } else if (i === 1) {\n                return i;\n            } else if (paginationRange < totalPages) {\n                if (totalPages - halfWay < currentPage) {\n                    return totalPages - paginationRange + i;\n                } else if (halfWay < currentPage) {\n                    return currentPage - halfWay + i;\n                } else {\n                    return i;\n                }\n            } else {\n                return i;\n            }\n        }\n\n        return {\n            restrict: 'AE',\n            templateUrl: function(elem, attrs) {\n                return attrs.templateUrl || templatePath;\n            },\n            scope: {\n                maxSize: '=?',\n                onPageChange: '&?'\n            },\n            link: function(scope, element, attrs) {\n                var paginationId;\n                paginationId = attrs.paginationId || '__default';\n                if (!scope.maxSize) { scope.maxSize = 9; }\n                scope.directionLinks = angular.isDefined(attrs.directionLinks) ? scope.$parent.$eval(attrs.directionLinks) : true;\n                scope.boundaryLinks = angular.isDefined(attrs.boundaryLinks) ? scope.$parent.$eval(attrs.boundaryLinks) : false;\n\n                if (!paginationService.isRegistered(paginationId)) {\n                    var idMessage = (paginationId !== '__default') ? ' (id: ' + paginationId + ') ' : ' ';\n                    throw 'pagination directive: the pagination controls' + idMessage + 'cannot be used without the corresponding pagination directive.';\n                }\n\n                var paginationRange = Math.max(scope.maxSize, 5);\n                scope.pages = [];\n                scope.pagination = {\n                    last: 1,\n                    current: 1\n                };\n\n                scope.$watch(function() {\n                    return (paginationService.getCollectionLength(paginationId) + 1) * paginationService.getItemsPerPage(paginationId);\n                }, function(length) {\n                    if (0 < length) {\n                        generatePagination();\n                    }\n                });\n\n                scope.$watch(function() {\n                    return paginationService.getCurrentPage(paginationId);\n                }, function(currentPage, previousPage) {\n                    if (currentPage != previousPage) {\n                        goToPage(currentPage);\n                    }\n                });\n\n                scope.setCurrent = function(num) {\n                    if (isValidPageNumber(num)) {\n                        paginationService.setCurrentPage(paginationId, num);\n                    }\n                };\n\n                function goToPage(num) {\n                    if (isValidPageNumber(num)) {\n                        scope.pages = generatePagesArray(num, paginationService.getCollectionLength(paginationId), paginationService.getItemsPerPage(paginationId), paginationRange);\n                        scope.pagination.current = num;\n\n                        // if a callback has been set, then call it with the page number as an argument\n                        if (scope.onPageChange) {\n                            scope.onPageChange({ newPageNumber : num });\n                        }\n                    }\n                }\n\n                function generatePagination() {\n                    var page = parseInt(paginationService.getCurrentPage(paginationId)) || 1;\n\n                    scope.pages = generatePagesArray(page, paginationService.getCollectionLength(paginationId), paginationService.getItemsPerPage(paginationId), paginationRange);\n                    scope.pagination.current = page;\n                    scope.pagination.last = scope.pages[scope.pages.length - 1];\n                    if (scope.pagination.last < scope.pagination.current) {\n                        scope.setCurrent(scope.pagination.last);\n                    }\n                }\n\n                function isValidPageNumber(num) {\n                    return (numberRegex.test(num) && (0 < num && num <= scope.pagination.last));\n                }\n            }\n        };\n    }]);\n\n    module.filter('itemsPerPage', ['paginationService', function(paginationService) {\n        return function(collection, itemsPerPage, paginationId) {\n            if (typeof (paginationId) === 'undefined') {\n                paginationId = '__default';\n            }\n            if (!paginationService.isRegistered(paginationId)) {\n                throw 'pagination directive: the itemsPerPage id argument (id: ' + paginationId + ') does not match a registered pagination-id.';\n            }\n            var end;\n            var start;\n            if (collection instanceof Array) {\n                itemsPerPage = parseInt(itemsPerPage) || 9999999999;\n                if (paginationService.isAsyncMode(paginationId)) {\n                    start = 0;\n                } else {\n                    start = (paginationService.getCurrentPage(paginationId) - 1) * itemsPerPage;\n                }\n                end = start + itemsPerPage;\n                paginationService.setItemsPerPage(paginationId, itemsPerPage);\n\n                return collection.slice(start, end);\n            } else {\n                return collection;\n            }\n        };\n    }]);\n\n    module.service('paginationService', function() {\n        var instances = {};\n        var lastRegisteredInstance;\n\n        this.registerInstance = function(instanceId) {\n            if (typeof instances[instanceId] === 'undefined') {\n                instances[instanceId] = {\n                    asyncMode: false\n                };\n                lastRegisteredInstance = instanceId;\n            }\n        };\n\n        this.isRegistered = function(instanceId) {\n            return (typeof instances[instanceId] !== 'undefined');\n        };\n\n        this.getLastInstanceId = function() {\n            return lastRegisteredInstance;\n        };\n\n        this.setCurrentPageParser = function(instanceId, val, scope) {\n            instances[instanceId].currentPageParser = val;\n            instances[instanceId].context = scope;\n        };\n        this.setCurrentPage = function(instanceId, val) {\n            instances[instanceId].currentPageParser.assign(instances[instanceId].context, val);\n        };\n        this.getCurrentPage = function(instanceId) {\n            var parser = instances[instanceId].currentPageParser;\n            return parser ? parser(instances[instanceId].context) : 1;\n        };\n\n        this.setItemsPerPage = function(instanceId, val) {\n            instances[instanceId].itemsPerPage = val;\n        };\n        this.getItemsPerPage = function(instanceId) {\n            return instances[instanceId].itemsPerPage;\n        };\n\n        this.setCollectionLength = function(instanceId, val) {\n            instances[instanceId].collectionLength = val;\n        };\n        this.getCollectionLength = function(instanceId) {\n            return instances[instanceId].collectionLength;\n        };\n\n        this.setAsyncModeTrue = function(instanceId) {\n            instances[instanceId].asyncMode = true;\n        };\n\n        this.isAsyncMode = function(instanceId) {\n            return instances[instanceId].asyncMode;\n        };\n    });\n})();\n","'use strict';\n\nangular.module('video-ads')\n    .controller('LoginCtrl', function($scope, authService, $location, $rootScope) {\n        $rootScope.showSearchBar = false;\n        $rootScope.showSaveButton = false;\n        $scope.username = '';\n        $scope.password = '';\n        $scope.submitLogin = function() {\n            authService.login($scope.username, $scope.password);\n        };\n    });\n","'use strict';\n\nangular.module('video-ads')\n  .constant('AlertEvents', {\n    INFO: 'alert-info',\n    ERROR: 'alert-error',\n    SUCCESS: 'alert-success',\n    CLEAR: 'alert-clear'\n  })\n  .directive('alert', function(){\n    return {\n      templateUrl: 'shared/alert/alert.html',\n      restrict:'E',\n      controller: function($scope, AlertEvents){\n\n        $scope.$on(AlertEvents.INFO, function(event, message){\n          $scope.alertStatus = {info: true};\n          $scope.infoMessage = message;\n        });\n\n        $scope.$on(AlertEvents.ERROR, function(event, message){\n          $scope.alertStatus = {error:true};\n          $scope.errorMessage = message;\n        });\n\n        $scope.$on(AlertEvents.SUCCESS, function(event, message){\n          $scope.alertStatus = { success: true};\n          $scope.successMessage = message;\n        });\n\n        $scope.$on(AlertEvents.CLEAR, function(){\n          $scope.alertStatus = null;\n        });\n      }\n    };\n  });\n","'use strict';\nangular.module('video-ads')\n  .factory('authInterceptor', ['$rootScope', '$q', '$window', '$location', '$injector', 'httpRequestBuffer', function($rootScope, $q, $window, $location, $injector, httpRequestBuffer) {\n    return {\n      'request': function(config) {\n        config.headers = config.headers || {};\n        if ($window.sessionStorage.token) {\n          if (!config.ignoreAuthorizationHeader) {\n            config.headers.Authorization = 'JWT ' + $window.sessionStorage.token;\n          }\n        }\n        return config;\n      },\n      'responseError': function(response) {\n        if (response.config && !response.config.headers.ignoreAuthModule) {\n          if (response.status === 403) {\n            var deferred = $q.defer();\n            httpRequestBuffer.append(response.config, deferred);\n            var authService = $injector.get('authService');\n            authService.refreshToken();\n          }\n        }\n        return $q.reject(response);\n      }\n    };\n  }])\n  .config(['$httpProvider', function($httpProvider) {\n    $httpProvider.interceptors.push('authInterceptor');\n  }])\n  .service('authService', ['$window', '$http', '$rootScope', '$location', 'httpRequestBuffer', function($window, $http, $rootScope, $location, httpRequestBuffer) {\n    var _login = function(username, password) {\n      return $http.post('/api-token-auth/', {\n          'username': username,\n          'password': password\n        })\n        .then(function(response) {\n          $window.sessionStorage.token = response.data.token;\n          $location.path('/');\n        });\n    };\n    var _refreshToken = function() {\n      return $http.post('/api-token-refresh/', {\n          'token': $window.sessionStorage.token\n        }, {\n          'ignoreAuthModule': true\n        }).success(function(response) {\n          $window.sessionStorage.token = response.token;\n          httpRequestBuffer.retryAll();\n        })\n        .error(function() {\n          httpRequestBuffer.rejectAll();\n          $location.path('/login');\n        });\n    };\n\n    return {\n      login: _login,\n      refreshToken: _refreshToken\n    };\n  }])\n  // Thanks to witoldsz/angular-http-auth\n  .factory('httpRequestBuffer', ['$injector',\n    function($injector) {\n      var buffer = [];\n\n      var $http;\n\n      function _retryHttpRequest(config, deferred) {\n        function successCallback(response) {\n          deferred.resolve(response);\n        }\n\n        function errorCallback(response) {\n          deferred.reject(response);\n        }\n        $http = $http || $injector.get('$http');\n        config.headers.ignoreAuthModule = true;\n        $http(config).then(successCallback, errorCallback);\n      }\n\n      return {\n        append: function(config, deferred) {\n          buffer.push({\n            config: config,\n            deferred: deferred\n          });\n        },\n        rejectAll: function(reason) {\n          if (reason) {\n            _.each(buffer, function(request) {\n              request.deferred.reject(reason);\n            });\n          }\n          buffer = [];\n        },\n        retryAll: function() {\n          _.each(buffer, function(request) {\n            _retryHttpRequest(request.config, request.deferred);\n          });\n          buffer = [];\n        }\n      };\n    }\n  ]);\n","'use strict';\n\nangular.module('video-ads')\n  .directive('deliveryChart', function() {\n    return {\n      restrict: 'E',\n      templateUrl: 'shared/chart/chart.html',\n      scope: {\n        impressions: '@impressions'\n      },\n      //Setting up Highcharts options\n      controller: function($scope) {\n        $scope.semiCircleConfig = {\n          options: {\n            chart: {\n              type: 'pie',\n              backgroundColor: 'transparent',\n              height: 75,\n              margin: 0,\n              width: 75,\n            },\n            exporting: { enabled: false },\n            credits: { enabled: false },\n            tooltip: { enabled: false },\n            colors: ['#008d52', '#e2e2e2'],\n          },\n          series: [{\n            dataLabels: { enabled: false },\n            states: {\n              hover: {\n                 enabled: false\n              }\n            },\n            animation: false,\n            startAngle: -90,\n            endAngle: 90,\n            center: ['50%', '75%'],\n            innerSize: '50%',\n            name: 'Delivery',\n            data: [\n              parseInt($scope.impressions),\n              (100 - parseInt($scope.impressions))\n            ]\n          }],\n          title: {\n            text: ''\n          },\n          subtitle: {\n            text: ''\n          },\n          loading: false\n        };\n      }\n    };\n  });\n","'use strict';\n\nangular.module('video-ads')\n\t.filter('convertToLocal', function() {\n    return function (input) {\n      if (input) {\n        return moment.utc(input).local().format('YYYY-MM-DD hh:mm A');\n      }\n      return input;\n    };\n  });","'use strict';\nangular.module('video-ads')\n  .directive('datepicker', ['$filter', function($filter) {\n    return {\n      scope: {\n        'date': '=',\n      },\n      replace: true,\n      require:'ngModel',\n      template: '<input class=\"form-control\" ng-model=\"date\" type=\"text\"/>',\n      link: function(scope, element, attrs, ngModel){\n        scope.required = attrs.required || false;\n\n        var startDate = new Date();\n        if (attrs.time === 'startOfDay') {\n          startDate.setMinutes(0);\n          startDate.setHours(0);\n          startDate.setSeconds(0);\n        }\n        if (attrs.time === 'endOfDay') {\n          startDate.setMinutes(59);\n          startDate.setHours(23);\n          startDate.setSeconds(59);\n        }\n\n        element.datetimepicker({\n          format: 'Y-m-d h:i A',\n          startDate: startDate,\n          step: 30\n        });\n        var formatter = function(value){\n          return $filter('convertToLocal')(value);\n        };\n        ngModel.$formatters.unshift(formatter);\n\n        ngModel.$parsers.unshift(function(value){\n          var momentFormat = 'YYYY-MM-DDTHH:mm:DDZZ';\n          if (value){\n            return moment(value).format(momentFormat);\n          } else {\n            return moment().format(momentFormat);\n          }\n        });\n      }\n    };\n  }]);\n","'use strict';\n\nangular.module('video-ads')\n  .directive('delivery', function() {\n    return {\n      templateUrl: 'shared/delivery/delivery-progress.html',\n      scope: {\n          'videoad': '='\n      }\n    }\n  });\n","'use strict';\n\nangular.module('video-ads')\n  .directive('navBar', function() {\n    return {\n        'restrict': 'E',\n        'templateUrl': 'shared/navbar/navbar.html',\n        'controller': function($scope, $rootScope, logoUrl) {\n            $scope.searchTerm = '';\n            $scope.logoUrl = logoUrl;\n            $scope.saveVideoAd = function(){\n                $rootScope.$broadcast('save-video-ad');\n            };\n            //Emits a search signal, that is picked up by list.js\n            $scope.search = function(){\n                $rootScope.$broadcast('search', $scope.searchTerm);\n            };\n            $scope.clearSearch = function(){\n              $rootScope.$broadcast('clearSearch');\n              $scope.searchTerm = '';\n            };\n        }\n    };\n  });\n","'use strict';\n//Service to get / create / delete video ads.\nangular.module('video-ads')\n  .factory('videoAdService',\n    function(Restangular) {\n      Restangular.setBaseUrl('/api/');\n      Restangular.setRequestSuffix('/');\n\n      return Restangular.service('advertisements');\n    })\n  .config(function(RestangularProvider) {\n    // Restangular likes lists to be returned as lists. DRF returns lists as a JSON object, with the list of objects inside of the response.results object.\n    // So, we write this response interceptor in order to return data.results in teh case the current operation is getList\n    RestangularProvider.addResponseInterceptor(function(data, operation) {\n      if (operation === 'getList') {\n        var results = data.results;\n        results.meta = {\n          count: data.count,\n          prev: data.prev,\n          next: data.next\n        };\n\n        return results;\n      }\n      return data;\n    });\n  });\n","'use strict';\n\nangular.module('video-ads')\n\t.filter('placeholder', function(placeholderUrl) {\n    return function (input) {\n      if (input) {\n        return input;\n      } else {\n        return placeholderUrl;\n      }\n    };\n  });\n"]}